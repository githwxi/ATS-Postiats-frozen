######
##
## The Python3 code
## is generated from ATS source by atscc2py3
## The starting compilation time is: 2016-7-26: 22h:28m
##
######

######
#ATSextcode_beg()
######
######
from ats2pypre_basics_cats import *
######
from ats2pypre_integer_cats import *
from ats2pypre_bool_cats import *
######
######
#ATSextcode_end()
######

def _ats2pypre_stream_patsfun_1__closurerize():
  def _ats2pypre_stream_patsfun_1__cfun(cenv): return _ats2pypre_stream_patsfun_1()
  return (_ats2pypre_stream_patsfun_1__cfun, )

def _ats2pypre_stream_patsfun_3__closurerize(env0):
  def _ats2pypre_stream_patsfun_3__cfun(cenv): return _ats2pypre_stream_patsfun_3(cenv[1])
  return (_ats2pypre_stream_patsfun_3__cfun, env0)

def _ats2pypre_stream_patsfun_7__closurerize(env0, env1):
  def _ats2pypre_stream_patsfun_7__cfun(cenv): return _ats2pypre_stream_patsfun_7(cenv[1], cenv[2])
  return (_ats2pypre_stream_patsfun_7__cfun, env0, env1)

def _ats2pypre_stream_patsfun_9__closurerize(env0, env1):
  def _ats2pypre_stream_patsfun_9__cfun(cenv): return _ats2pypre_stream_patsfun_9(cenv[1], cenv[2])
  return (_ats2pypre_stream_patsfun_9__cfun, env0, env1)

def _ats2pypre_stream_patsfun_15__closurerize(env0, env1):
  def _ats2pypre_stream_patsfun_15__cfun(cenv): return _ats2pypre_stream_patsfun_15(cenv[1], cenv[2])
  return (_ats2pypre_stream_patsfun_15__cfun, env0, env1)

def _ats2pypre_stream_patsfun_17__closurerize(env0):
  def _ats2pypre_stream_patsfun_17__cfun(cenv, arg0): return _ats2pypre_stream_patsfun_17(cenv[1], arg0)
  return (_ats2pypre_stream_patsfun_17__cfun, env0)

def _ats2pypre_stream_patsfun_19__closurerize(env0, env1):
  def _ats2pypre_stream_patsfun_19__cfun(cenv): return _ats2pypre_stream_patsfun_19(cenv[1], cenv[2])
  return (_ats2pypre_stream_patsfun_19__cfun, env0, env1)

def _ats2pypre_stream_patsfun_21__closurerize(env0):
  def _ats2pypre_stream_patsfun_21__cfun(cenv, arg0): return _ats2pypre_stream_patsfun_21(cenv[1], arg0)
  return (_ats2pypre_stream_patsfun_21__cfun, env0)

def _ats2pypre_stream_patsfun_24__closurerize(env0):
  def _ats2pypre_stream_patsfun_24__cfun(cenv, arg0): return _ats2pypre_stream_patsfun_24(cenv[1], arg0)
  return (_ats2pypre_stream_patsfun_24__cfun, env0)

def _ats2pypre_stream_patsfun_28__closurerize(env0):
  def _ats2pypre_stream_patsfun_28__cfun(cenv, arg0): return _ats2pypre_stream_patsfun_28(cenv[1], arg0)
  return (_ats2pypre_stream_patsfun_28__cfun, env0)

def _ats2pypre_stream_patsfun_31__closurerize(env0, env1):
  def _ats2pypre_stream_patsfun_31__cfun(cenv): return _ats2pypre_stream_patsfun_31(cenv[1], cenv[2])
  return (_ats2pypre_stream_patsfun_31__cfun, env0, env1)

def _ats2pypre_stream_patsfun_34__closurerize(env0, env1, env2, env3):
  def _ats2pypre_stream_patsfun_34__cfun(cenv): return _ats2pypre_stream_patsfun_34(cenv[1], cenv[2], cenv[3], cenv[4])
  return (_ats2pypre_stream_patsfun_34__cfun, env0, env1, env2, env3)

def _ats2pypre_stream_patsfun_35__closurerize(env0, env1):
  def _ats2pypre_stream_patsfun_35__cfun(cenv): return _ats2pypre_stream_patsfun_35(cenv[1], cenv[2])
  return (_ats2pypre_stream_patsfun_35__cfun, env0, env1)

def _ats2pypre_stream_patsfun_38__closurerize(env0):
  def _ats2pypre_stream_patsfun_38__cfun(cenv): return _ats2pypre_stream_patsfun_38(cenv[1])
  return (_ats2pypre_stream_patsfun_38__cfun, env0)

def _ats2pypre_stream_patsfun_40__closurerize(env0):
  def _ats2pypre_stream_patsfun_40__cfun(cenv): return _ats2pypre_stream_patsfun_40(cenv[1])
  return (_ats2pypre_stream_patsfun_40__cfun, env0)

def _ats2pypre_stream_patsfun_42__closurerize(env0, env1):
  def _ats2pypre_stream_patsfun_42__cfun(cenv): return _ats2pypre_stream_patsfun_42(cenv[1], cenv[2])
  return (_ats2pypre_stream_patsfun_42__cfun, env0, env1)

def ats2pypre_stream_make_nil():
  tmpret0 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_make_nil
  tmpret0 = [0, _ats2pypre_stream_patsfun_1__closurerize()]
  return tmpret0


def _ats2pypre_stream_patsfun_1():
  tmpret1 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab__ats2pypre_stream_patsfun_1
  tmpret1 = None
  return tmpret1


def ats2pypre_stream_make_sing(arg0):
  tmpret2 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_make_sing
  tmpret2 = [0, _ats2pypre_stream_patsfun_3__closurerize(arg0)]
  return tmpret2


def _ats2pypre_stream_patsfun_3(env0):
  tmpret3 = None
  tmp4 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab__ats2pypre_stream_patsfun_3
  tmp4 = ats2pypre_stream_make_nil()
  tmpret3 = (env0, tmp4)
  return tmpret3


def ats2pypre_stream_nth_opt(arg0, arg1):
  tmpret5 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_nth_opt
  tmpret5 = _ats2pypre_stream_loop_5(arg0, arg1)
  return tmpret5


def _ats2pypre_stream_loop_5(arg0, arg1):
  apy0 = None
  apy1 = None
  tmpret6 = None
  tmp7 = None
  tmp8 = None
  tmp9 = None
  tmp10 = None
  tmp11 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab0():
    nonlocal arg0, arg1
    nonlocal apy0, apy1, tmpret6, tmp7, tmp8, tmp9, tmp10, tmp11
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp7)): tmplab_py = 4 ; return#__atstmplab3
    __atstmplab1()
    return
  def __atstmplab1():
    nonlocal arg0, arg1
    nonlocal apy0, apy1, tmpret6, tmp7, tmp8, tmp9, tmp10, tmp11
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmpret6 = None
    return
  def __atstmplab2():
    nonlocal arg0, arg1
    nonlocal apy0, apy1, tmpret6, tmp7, tmp8, tmp9, tmp10, tmp11
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab3()
    return
  def __atstmplab3():
    nonlocal arg0, arg1
    nonlocal apy0, apy1, tmpret6, tmp7, tmp8, tmp9, tmp10, tmp11
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp8 = tmp7[0]
    tmp9 = tmp7[1]
    tmp10 = ats2pypre_gt_int1_int1(arg1, 0)
    if (tmp10):
      tmp11 = ats2pypre_pred_int1(arg1)
      #ATStailcalseq_beg
      apy0 = tmp9
      apy1 = tmp11
      arg0 = apy0
      arg1 = apy1
      funlab_py = 1 #__patsflab__ats2pypre_stream_loop_5
      #ATStailcalseq_end
    else:
      tmpret6 = (tmp8, )
    #endif
    return
  mbranch_1 = { 1: __atstmplab0, 2: __atstmplab1, 3: __atstmplab2, 4: __atstmplab3 }
  while(1):
    funlab_py = 0
    #__patsflab__ats2pypre_stream_loop_5
    ATSPMVlazyval_eval(arg0); tmp7 = arg0[1]
    #ATScaseofseq_beg
    tmplab_py = 1
    while(1):
      mbranch_1.get(tmplab_py)()
      if (tmplab_py == 0): break
    #ATScaseofseq_end
    if (funlab_py == 0): break
  return tmpret6


def ats2pypre_stream_takeLte(arg0, arg1):
  tmpret12 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_takeLte
  tmpret12 = [0, _ats2pypre_stream_patsfun_7__closurerize(arg0, arg1)]
  return tmpret12


def _ats2pypre_stream_patsfun_7(env0, env1):
  tmpret13 = None
  tmp14 = None
  tmp15 = None
  tmp16 = None
  tmp17 = None
  tmp18 = None
  tmp19 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab4():
    nonlocal env0, env1
    nonlocal tmpret13, tmp14, tmp15, tmp16, tmp17, tmp18, tmp19
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp15)): tmplab_py = 4 ; return#__atstmplab7
    __atstmplab5()
    return
  def __atstmplab5():
    nonlocal env0, env1
    nonlocal tmpret13, tmp14, tmp15, tmp16, tmp17, tmp18, tmp19
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmpret13 = None
    return
  def __atstmplab6():
    nonlocal env0, env1
    nonlocal tmpret13, tmp14, tmp15, tmp16, tmp17, tmp18, tmp19
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab7()
    return
  def __atstmplab7():
    nonlocal env0, env1
    nonlocal tmpret13, tmp14, tmp15, tmp16, tmp17, tmp18, tmp19
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp16 = tmp15[0]
    tmp17 = tmp15[1]
    tmp19 = ats2pypre_sub_int1_int1(env1, 1)
    tmp18 = ats2pypre_stream_takeLte(tmp17, tmp19)
    tmpret13 = (tmp16, tmp18)
    return
  mbranch_1 = { 1: __atstmplab4, 2: __atstmplab5, 3: __atstmplab6, 4: __atstmplab7 }
  #__patsflab__ats2pypre_stream_patsfun_7
  tmp14 = ats2pypre_gt_int1_int1(env1, 0)
  if (tmp14):
    ATSPMVlazyval_eval(env0); tmp15 = env0[1]
    #ATScaseofseq_beg
    tmplab_py = 1
    while(1):
      mbranch_1.get(tmplab_py)()
      if (tmplab_py == 0): break
    #ATScaseofseq_end
  else:
    tmpret13 = None
  #endif
  return tmpret13


def ats2pypre_stream_dropLte(arg0, arg1):
  tmpret20 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_dropLte
  tmpret20 = [0, _ats2pypre_stream_patsfun_9__closurerize(arg0, arg1)]
  return tmpret20


def _ats2pypre_stream_patsfun_9(env0, env1):
  tmpret21 = None
  tmp22 = None
  tmp23 = None
  tmp25 = None
  tmp26 = None
  tmp27 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab8():
    nonlocal env0, env1
    nonlocal tmpret21, tmp22, tmp23, tmp25, tmp26, tmp27
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp23)): tmplab_py = 4 ; return#__atstmplab11
    __atstmplab9()
    return
  def __atstmplab9():
    nonlocal env0, env1
    nonlocal tmpret21, tmp22, tmp23, tmp25, tmp26, tmp27
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmpret21 = None
    return
  def __atstmplab10():
    nonlocal env0, env1
    nonlocal tmpret21, tmp22, tmp23, tmp25, tmp26, tmp27
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab11()
    return
  def __atstmplab11():
    nonlocal env0, env1
    nonlocal tmpret21, tmp22, tmp23, tmp25, tmp26, tmp27
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp25 = tmp23[1]
    tmp27 = ats2pypre_sub_int1_int1(env1, 1)
    tmp26 = ats2pypre_stream_dropLte(tmp25, tmp27)
    ATSPMVlazyval_eval(tmp26); tmpret21 = tmp26[1]
    return
  mbranch_1 = { 1: __atstmplab8, 2: __atstmplab9, 3: __atstmplab10, 4: __atstmplab11 }
  #__patsflab__ats2pypre_stream_patsfun_9
  tmp22 = ats2pypre_gt_int1_int1(env1, 0)
  if (tmp22):
    ATSPMVlazyval_eval(env0); tmp23 = env0[1]
    #ATScaseofseq_beg
    tmplab_py = 1
    while(1):
      mbranch_1.get(tmplab_py)()
      if (tmplab_py == 0): break
    #ATScaseofseq_end
  else:
    ATSPMVlazyval_eval(env0); tmpret21 = env0[1]
  #endif
  return tmpret21


def ats2pypre_stream_take_opt(arg0, arg1):
  tmpret28 = None
  tmp37 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_take_opt
  tmp37 = None
  tmpret28 = _ats2pypre_stream_auxmain_11(arg1, arg0, 0, tmp37)
  return tmpret28


def _ats2pypre_stream_auxmain_11(env0, arg0, arg1, arg2):
  apy0 = None
  apy1 = None
  apy2 = None
  tmpret29 = None
  tmp30 = None
  tmp31 = None
  tmp32 = None
  tmp33 = None
  tmp34 = None
  tmp35 = None
  tmp36 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab12():
    nonlocal env0, arg0, arg1, arg2
    nonlocal apy0, apy1, apy2, tmpret29, tmp30, tmp31, tmp32, tmp33, tmp34, tmp35, tmp36
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp31)): tmplab_py = 4 ; return#__atstmplab15
    __atstmplab13()
    return
  def __atstmplab13():
    nonlocal env0, arg0, arg1, arg2
    nonlocal apy0, apy1, apy2, tmpret29, tmp30, tmp31, tmp32, tmp33, tmp34, tmp35, tmp36
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmpret29 = None
    return
  def __atstmplab14():
    nonlocal env0, arg0, arg1, arg2
    nonlocal apy0, apy1, apy2, tmpret29, tmp30, tmp31, tmp32, tmp33, tmp34, tmp35, tmp36
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab15()
    return
  def __atstmplab15():
    nonlocal env0, arg0, arg1, arg2
    nonlocal apy0, apy1, apy2, tmpret29, tmp30, tmp31, tmp32, tmp33, tmp34, tmp35, tmp36
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp32 = tmp31[0]
    tmp33 = tmp31[1]
    tmp34 = ats2pypre_add_int1_int1(arg1, 1)
    tmp35 = (tmp32, arg2)
    #ATStailcalseq_beg
    apy0 = tmp33
    apy1 = tmp34
    apy2 = tmp35
    arg0 = apy0
    arg1 = apy1
    arg2 = apy2
    funlab_py = 1 #__patsflab__ats2pypre_stream_auxmain_11
    #ATStailcalseq_end
    return
  mbranch_1 = { 1: __atstmplab12, 2: __atstmplab13, 3: __atstmplab14, 4: __atstmplab15 }
  while(1):
    funlab_py = 0
    #__patsflab__ats2pypre_stream_auxmain_11
    tmp30 = ats2pypre_lt_int1_int1(arg1, env0)
    if (tmp30):
      ATSPMVlazyval_eval(arg0); tmp31 = arg0[1]
      #ATScaseofseq_beg
      tmplab_py = 1
      while(1):
        mbranch_1.get(tmplab_py)()
        if (tmplab_py == 0): break
      #ATScaseofseq_end
    else:
      tmp36 = ats2pypre_list_reverse(arg2)
      tmpret29 = (tmp36, )
    #endif
    if (funlab_py == 0): break
  return tmpret29


def ats2pypre_stream_drop_opt(arg0, arg1):
  tmpret38 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_drop_opt
  tmpret38 = _ats2pypre_stream_auxmain_13(arg1, arg0, 0)
  return tmpret38


def _ats2pypre_stream_auxmain_13(env0, arg0, arg1):
  apy0 = None
  apy1 = None
  tmpret39 = None
  tmp40 = None
  tmp41 = None
  tmp43 = None
  tmp44 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab16():
    nonlocal env0, arg0, arg1
    nonlocal apy0, apy1, tmpret39, tmp40, tmp41, tmp43, tmp44
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp41)): tmplab_py = 4 ; return#__atstmplab19
    __atstmplab17()
    return
  def __atstmplab17():
    nonlocal env0, arg0, arg1
    nonlocal apy0, apy1, tmpret39, tmp40, tmp41, tmp43, tmp44
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmpret39 = None
    return
  def __atstmplab18():
    nonlocal env0, arg0, arg1
    nonlocal apy0, apy1, tmpret39, tmp40, tmp41, tmp43, tmp44
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab19()
    return
  def __atstmplab19():
    nonlocal env0, arg0, arg1
    nonlocal apy0, apy1, tmpret39, tmp40, tmp41, tmp43, tmp44
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp43 = tmp41[1]
    tmp44 = ats2pypre_add_int1_int1(arg1, 1)
    #ATStailcalseq_beg
    apy0 = tmp43
    apy1 = tmp44
    arg0 = apy0
    arg1 = apy1
    funlab_py = 1 #__patsflab__ats2pypre_stream_auxmain_13
    #ATStailcalseq_end
    return
  mbranch_1 = { 1: __atstmplab16, 2: __atstmplab17, 3: __atstmplab18, 4: __atstmplab19 }
  while(1):
    funlab_py = 0
    #__patsflab__ats2pypre_stream_auxmain_13
    tmp40 = ats2pypre_lt_int1_int1(arg1, env0)
    if (tmp40):
      ATSPMVlazyval_eval(arg0); tmp41 = arg0[1]
      #ATScaseofseq_beg
      tmplab_py = 1
      while(1):
        mbranch_1.get(tmplab_py)()
        if (tmplab_py == 0): break
      #ATScaseofseq_end
    else:
      tmpret39 = (arg0, )
    #endif
    if (funlab_py == 0): break
  return tmpret39


def ats2pypre_stream_map_cloref(arg0, arg1):
  tmpret45 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_map_cloref
  tmpret45 = [0, _ats2pypre_stream_patsfun_15__closurerize(arg0, arg1)]
  return tmpret45


def _ats2pypre_stream_patsfun_15(env0, env1):
  tmpret46 = None
  tmp47 = None
  tmp48 = None
  tmp49 = None
  tmp50 = None
  tmp51 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab20():
    nonlocal env0, env1
    nonlocal tmpret46, tmp47, tmp48, tmp49, tmp50, tmp51
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp47)): tmplab_py = 4 ; return#__atstmplab23
    __atstmplab21()
    return
  def __atstmplab21():
    nonlocal env0, env1
    nonlocal tmpret46, tmp47, tmp48, tmp49, tmp50, tmp51
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmpret46 = None
    return
  def __atstmplab22():
    nonlocal env0, env1
    nonlocal tmpret46, tmp47, tmp48, tmp49, tmp50, tmp51
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab23()
    return
  def __atstmplab23():
    nonlocal env0, env1
    nonlocal tmpret46, tmp47, tmp48, tmp49, tmp50, tmp51
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp48 = tmp47[0]
    tmp49 = tmp47[1]
    tmp50 = env1[0](env1, tmp48)
    tmp51 = ats2pypre_stream_map_cloref(tmp49, env1)
    tmpret46 = (tmp50, tmp51)
    return
  mbranch_1 = { 1: __atstmplab20, 2: __atstmplab21, 3: __atstmplab22, 4: __atstmplab23 }
  #__patsflab__ats2pypre_stream_patsfun_15
  ATSPMVlazyval_eval(env0); tmp47 = env0[1]
  #ATScaseofseq_beg
  tmplab_py = 1
  while(1):
    mbranch_1.get(tmplab_py)()
    if (tmplab_py == 0): break
  #ATScaseofseq_end
  return tmpret46


def ats2pypre_stream_map_method(arg0, arg1):
  tmpret52 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_map_method
  tmpret52 = _ats2pypre_stream_patsfun_17__closurerize(arg0)
  return tmpret52


def _ats2pypre_stream_patsfun_17(env0, arg0):
  tmpret53 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab__ats2pypre_stream_patsfun_17
  tmpret53 = ats2pypre_stream_map_cloref(env0, arg0)
  return tmpret53


def ats2pypre_stream_filter_cloref(arg0, arg1):
  tmpret54 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_filter_cloref
  tmpret54 = [0, _ats2pypre_stream_patsfun_19__closurerize(arg0, arg1)]
  return tmpret54


def _ats2pypre_stream_patsfun_19(env0, env1):
  tmpret55 = None
  tmp56 = None
  tmp57 = None
  tmp58 = None
  tmp59 = None
  tmp60 = None
  tmp61 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab24():
    nonlocal env0, env1
    nonlocal tmpret55, tmp56, tmp57, tmp58, tmp59, tmp60, tmp61
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp56)): tmplab_py = 4 ; return#__atstmplab27
    __atstmplab25()
    return
  def __atstmplab25():
    nonlocal env0, env1
    nonlocal tmpret55, tmp56, tmp57, tmp58, tmp59, tmp60, tmp61
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmpret55 = None
    return
  def __atstmplab26():
    nonlocal env0, env1
    nonlocal tmpret55, tmp56, tmp57, tmp58, tmp59, tmp60, tmp61
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab27()
    return
  def __atstmplab27():
    nonlocal env0, env1
    nonlocal tmpret55, tmp56, tmp57, tmp58, tmp59, tmp60, tmp61
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp57 = tmp56[0]
    tmp58 = tmp56[1]
    tmp59 = env1[0](env1, tmp57)
    if (tmp59):
      tmp60 = ats2pypre_stream_filter_cloref(tmp58, env1)
      tmpret55 = (tmp57, tmp60)
    else:
      tmp61 = ats2pypre_stream_filter_cloref(tmp58, env1)
      ATSPMVlazyval_eval(tmp61); tmpret55 = tmp61[1]
    #endif
    return
  mbranch_1 = { 1: __atstmplab24, 2: __atstmplab25, 3: __atstmplab26, 4: __atstmplab27 }
  #__patsflab__ats2pypre_stream_patsfun_19
  ATSPMVlazyval_eval(env0); tmp56 = env0[1]
  #ATScaseofseq_beg
  tmplab_py = 1
  while(1):
    mbranch_1.get(tmplab_py)()
    if (tmplab_py == 0): break
  #ATScaseofseq_end
  return tmpret55


def ats2pypre_stream_filter_method(arg0):
  tmpret62 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_filter_method
  tmpret62 = _ats2pypre_stream_patsfun_21__closurerize(arg0)
  return tmpret62


def _ats2pypre_stream_patsfun_21(env0, arg0):
  tmpret63 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab__ats2pypre_stream_patsfun_21
  tmpret63 = ats2pypre_stream_filter_cloref(env0, arg0)
  return tmpret63


def ats2pypre_stream_foreach_cloref(arg0, arg1):
  apy0 = None
  apy1 = None
  tmp65 = None
  tmp66 = None
  tmp67 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab28():
    nonlocal arg0, arg1
    nonlocal apy0, apy1, tmp65, tmp66, tmp67
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp65)): tmplab_py = 4 ; return#__atstmplab31
    __atstmplab29()
    return
  def __atstmplab29():
    nonlocal arg0, arg1
    nonlocal apy0, apy1, tmp65, tmp66, tmp67
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    None#ATSINSmove_void
    return
  def __atstmplab30():
    nonlocal arg0, arg1
    nonlocal apy0, apy1, tmp65, tmp66, tmp67
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab31()
    return
  def __atstmplab31():
    nonlocal arg0, arg1
    nonlocal apy0, apy1, tmp65, tmp66, tmp67
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp66 = tmp65[0]
    tmp67 = tmp65[1]
    arg1[0](arg1, tmp66)
    #ATStailcalseq_beg
    apy0 = tmp67
    apy1 = arg1
    arg0 = apy0
    arg1 = apy1
    funlab_py = 1 #__patsflab_stream_foreach_cloref
    #ATStailcalseq_end
    return
  mbranch_1 = { 1: __atstmplab28, 2: __atstmplab29, 3: __atstmplab30, 4: __atstmplab31 }
  while(1):
    funlab_py = 0
    #__patsflab_stream_foreach_cloref
    ATSPMVlazyval_eval(arg0); tmp65 = arg0[1]
    #ATScaseofseq_beg
    tmplab_py = 1
    while(1):
      mbranch_1.get(tmplab_py)()
      if (tmplab_py == 0): break
    #ATScaseofseq_end
    if (funlab_py == 0): break
  return#_void


def ats2pypre_stream_foreach_method(arg0):
  tmpret69 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_foreach_method
  tmpret69 = _ats2pypre_stream_patsfun_24__closurerize(arg0)
  return tmpret69


def _ats2pypre_stream_patsfun_24(env0, arg0):
  funlab_py = None
  tmplab_py = None
  #__patsflab__ats2pypre_stream_patsfun_24
  ats2pypre_stream_foreach_cloref(env0, arg0)
  return#_void


def ats2pypre_stream_iforeach_cloref(arg0, arg1):
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_iforeach_cloref
  _ats2pypre_stream_loop_26(arg1, 0, arg0)
  return#_void


def _ats2pypre_stream_loop_26(env0, arg0, arg1):
  apy0 = None
  apy1 = None
  tmp73 = None
  tmp74 = None
  tmp75 = None
  tmp77 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab32():
    nonlocal env0, arg0, arg1
    nonlocal apy0, apy1, tmp73, tmp74, tmp75, tmp77
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp73)): tmplab_py = 4 ; return#__atstmplab35
    __atstmplab33()
    return
  def __atstmplab33():
    nonlocal env0, arg0, arg1
    nonlocal apy0, apy1, tmp73, tmp74, tmp75, tmp77
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    None#ATSINSmove_void
    return
  def __atstmplab34():
    nonlocal env0, arg0, arg1
    nonlocal apy0, apy1, tmp73, tmp74, tmp75, tmp77
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab35()
    return
  def __atstmplab35():
    nonlocal env0, arg0, arg1
    nonlocal apy0, apy1, tmp73, tmp74, tmp75, tmp77
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp74 = tmp73[0]
    tmp75 = tmp73[1]
    env0[0](env0, arg0, tmp74)
    tmp77 = ats2pypre_add_int1_int1(arg0, 1)
    #ATStailcalseq_beg
    apy0 = tmp77
    apy1 = tmp75
    arg0 = apy0
    arg1 = apy1
    funlab_py = 1 #__patsflab__ats2pypre_stream_loop_26
    #ATStailcalseq_end
    return
  mbranch_1 = { 1: __atstmplab32, 2: __atstmplab33, 3: __atstmplab34, 4: __atstmplab35 }
  while(1):
    funlab_py = 0
    #__patsflab__ats2pypre_stream_loop_26
    ATSPMVlazyval_eval(arg1); tmp73 = arg1[1]
    #ATScaseofseq_beg
    tmplab_py = 1
    while(1):
      mbranch_1.get(tmplab_py)()
      if (tmplab_py == 0): break
    #ATScaseofseq_end
    if (funlab_py == 0): break
  return#_void


def ats2pypre_stream_iforeach_method(arg0):
  tmpret78 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_iforeach_method
  tmpret78 = _ats2pypre_stream_patsfun_28__closurerize(arg0)
  return tmpret78


def _ats2pypre_stream_patsfun_28(env0, arg0):
  funlab_py = None
  tmplab_py = None
  #__patsflab__ats2pypre_stream_patsfun_28
  ats2pypre_stream_iforeach_cloref(env0, arg0)
  return#_void


def ats2pypre_stream_tabulate_cloref(arg0):
  tmpret80 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream_tabulate_cloref
  tmpret80 = _ats2pypre_stream_auxmain_30(arg0, 0)
  return tmpret80


def _ats2pypre_stream_auxmain_30(env0, arg0):
  tmpret81 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab__ats2pypre_stream_auxmain_30
  tmpret81 = [0, _ats2pypre_stream_patsfun_31__closurerize(env0, arg0)]
  return tmpret81


def _ats2pypre_stream_patsfun_31(env0, env1):
  tmpret82 = None
  tmp83 = None
  tmp84 = None
  tmp85 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab__ats2pypre_stream_patsfun_31
  tmp83 = env0[0](env0, env1)
  tmp85 = ats2pypre_add_int1_int1(env1, 1)
  tmp84 = _ats2pypre_stream_auxmain_30(env0, tmp85)
  tmpret82 = (tmp83, tmp84)
  return tmpret82


def ats2pypre_cross_stream_list(arg0, arg1):
  tmpret86 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_cross_stream_list
  tmpret86 = [0, _ats2pypre_stream_patsfun_35__closurerize(arg0, arg1)]
  return tmpret86


def _ats2pypre_stream_auxmain_33(arg0, arg1, arg2, arg3):
  tmpret87 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab__ats2pypre_stream_auxmain_33
  tmpret87 = [0, _ats2pypre_stream_patsfun_34__closurerize(arg0, arg1, arg2, arg3)]
  return tmpret87


def _ats2pypre_stream_patsfun_34(env0, env1, env2, env3):
  tmpret88 = None
  tmp89 = None
  tmp90 = None
  tmp91 = None
  tmp92 = None
  tmp93 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab36():
    nonlocal env0, env1, env2, env3
    nonlocal tmpret88, tmp89, tmp90, tmp91, tmp92, tmp93
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(env3)): tmplab_py = 4 ; return#__atstmplab39
    __atstmplab37()
    return
  def __atstmplab37():
    nonlocal env0, env1, env2, env3
    nonlocal tmpret88, tmp89, tmp90, tmp91, tmp92, tmp93
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp91 = ats2pypre_cross_stream_list(env1, env2)
    ATSPMVlazyval_eval(tmp91); tmpret88 = tmp91[1]
    return
  def __atstmplab38():
    nonlocal env0, env1, env2, env3
    nonlocal tmpret88, tmp89, tmp90, tmp91, tmp92, tmp93
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab39()
    return
  def __atstmplab39():
    nonlocal env0, env1, env2, env3
    nonlocal tmpret88, tmp89, tmp90, tmp91, tmp92, tmp93
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp89 = env3[0]
    tmp90 = env3[1]
    tmp92 = (env0, tmp89)
    tmp93 = _ats2pypre_stream_auxmain_33(env0, env1, env2, tmp90)
    tmpret88 = (tmp92, tmp93)
    return
  mbranch_1 = { 1: __atstmplab36, 2: __atstmplab37, 3: __atstmplab38, 4: __atstmplab39 }
  #__patsflab__ats2pypre_stream_patsfun_34
  #ATScaseofseq_beg
  tmplab_py = 1
  while(1):
    mbranch_1.get(tmplab_py)()
    if (tmplab_py == 0): break
  #ATScaseofseq_end
  return tmpret88


def _ats2pypre_stream_patsfun_35(env0, env1):
  tmpret94 = None
  tmp95 = None
  tmp96 = None
  tmp97 = None
  tmp98 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab40():
    nonlocal env0, env1
    nonlocal tmpret94, tmp95, tmp96, tmp97, tmp98
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp95)): tmplab_py = 4 ; return#__atstmplab43
    __atstmplab41()
    return
  def __atstmplab41():
    nonlocal env0, env1
    nonlocal tmpret94, tmp95, tmp96, tmp97, tmp98
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmpret94 = None
    return
  def __atstmplab42():
    nonlocal env0, env1
    nonlocal tmpret94, tmp95, tmp96, tmp97, tmp98
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptrisnull(tmp95)): ATSINScaseof_fail("/home/hwxi/Research/ATS-Postiats-contrib/contrib/libatscc/DATS/stream.dats: 4661(line=301, offs=1) -- 4753(line=303, offs=50)");
    __atstmplab43()
    return
  def __atstmplab43():
    nonlocal env0, env1
    nonlocal tmpret94, tmp95, tmp96, tmp97, tmp98
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp96 = tmp95[0]
    tmp97 = tmp95[1]
    tmp98 = _ats2pypre_stream_auxmain_33(tmp96, tmp97, env1, env1)
    ATSPMVlazyval_eval(tmp98); tmpret94 = tmp98[1]
    return
  mbranch_1 = { 1: __atstmplab40, 2: __atstmplab41, 3: __atstmplab42, 4: __atstmplab43 }
  #__patsflab__ats2pypre_stream_patsfun_35
  ATSPMVlazyval_eval(env0); tmp95 = env0[1]
  #ATScaseofseq_beg
  tmplab_py = 1
  while(1):
    mbranch_1.get(tmplab_py)()
    if (tmplab_py == 0): break
  #ATScaseofseq_end
  return tmpret94


def ats2pypre_cross_stream_list0(arg0, arg1):
  tmpret99 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_cross_stream_list0
  tmpret99 = ats2pypre_cross_stream_list(arg0, arg1)
  return tmpret99


def ats2pypre_stream2cloref_exn(arg0):
  tmpret100 = None
  tmp101 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream2cloref_exn
  tmp101 = ats2pypre_ref(arg0)
  tmpret100 = _ats2pypre_stream_patsfun_38__closurerize(tmp101)
  return tmpret100


def _ats2pypre_stream_patsfun_38(env0):
  tmpret102 = None
  tmp103 = None
  tmp104 = None
  tmp105 = None
  tmp106 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab__ats2pypre_stream_patsfun_38
  tmp103 = ats2pypre_ref_get_elt(env0)
  ATSPMVlazyval_eval(tmp103); tmp104 = tmp103[1]
  if(ATSCKptrisnull(tmp104)): ATSINScaseof_fail("/home/hwxi/Research/ATS-Postiats-contrib/contrib/libatscc/DATS/stream.dats: 5054(line=329, offs=5) -- 5078(line=329, offs=29)");
  tmp105 = tmp104[0]
  tmp106 = tmp104[1]
  ats2pypre_ref_set_elt(env0, tmp106)
  tmpret102 = tmp105
  return tmpret102


def ats2pypre_stream2cloref_opt(arg0):
  tmpret108 = None
  tmp109 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream2cloref_opt
  tmp109 = ats2pypre_ref(arg0)
  tmpret108 = _ats2pypre_stream_patsfun_40__closurerize(tmp109)
  return tmpret108


def _ats2pypre_stream_patsfun_40(env0):
  tmpret110 = None
  tmp111 = None
  tmp112 = None
  tmp113 = None
  tmp114 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab44():
    nonlocal env0
    nonlocal tmpret110, tmp111, tmp112, tmp113, tmp114
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp112)): tmplab_py = 4 ; return#__atstmplab47
    __atstmplab45()
    return
  def __atstmplab45():
    nonlocal env0
    nonlocal tmpret110, tmp111, tmp112, tmp113, tmp114
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmpret110 = None
    return
  def __atstmplab46():
    nonlocal env0
    nonlocal tmpret110, tmp111, tmp112, tmp113, tmp114
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab47()
    return
  def __atstmplab47():
    nonlocal env0
    nonlocal tmpret110, tmp111, tmp112, tmp113, tmp114
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp113 = tmp112[0]
    tmp114 = tmp112[1]
    ats2pypre_ref_set_elt(env0, tmp114)
    tmpret110 = (tmp113, )
    return
  mbranch_1 = { 1: __atstmplab44, 2: __atstmplab45, 3: __atstmplab46, 4: __atstmplab47 }
  #__patsflab__ats2pypre_stream_patsfun_40
  tmp111 = ats2pypre_ref_get_elt(env0)
  ATSPMVlazyval_eval(tmp111); tmp112 = tmp111[1]
  #ATScaseofseq_beg
  tmplab_py = 1
  while(1):
    mbranch_1.get(tmplab_py)()
    if (tmplab_py == 0): break
  #ATScaseofseq_end
  return tmpret110


def ats2pypre_stream2cloref_last(arg0, arg1):
  tmpret116 = None
  tmp117 = None
  tmp118 = None
  funlab_py = None
  tmplab_py = None
  #__patsflab_stream2cloref_last
  tmp117 = ats2pypre_ref(arg0)
  tmp118 = ats2pypre_ref(arg1)
  tmpret116 = _ats2pypre_stream_patsfun_42__closurerize(tmp117, tmp118)
  return tmpret116


def _ats2pypre_stream_patsfun_42(env0, env1):
  tmpret119 = None
  tmp120 = None
  tmp121 = None
  tmp122 = None
  tmp123 = None
  funlab_py = None
  tmplab_py = None
  mbranch_1 = None
  def __atstmplab48():
    nonlocal env0, env1
    nonlocal tmpret119, tmp120, tmp121, tmp122, tmp123
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    if(ATSCKptriscons(tmp121)): tmplab_py = 4 ; return#__atstmplab51
    __atstmplab49()
    return
  def __atstmplab49():
    nonlocal env0, env1
    nonlocal tmpret119, tmp120, tmp121, tmp122, tmp123
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmpret119 = ats2pypre_ref_get_elt(env1)
    return
  def __atstmplab50():
    nonlocal env0, env1
    nonlocal tmpret119, tmp120, tmp121, tmp122, tmp123
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    __atstmplab51()
    return
  def __atstmplab51():
    nonlocal env0, env1
    nonlocal tmpret119, tmp120, tmp121, tmp122, tmp123
    nonlocal funlab_py, tmplab_py
    nonlocal mbranch_1
    tmplab_py = 0
    tmp122 = tmp121[0]
    tmp123 = tmp121[1]
    ats2pypre_ref_set_elt(env0, tmp123)
    ats2pypre_ref_set_elt(env1, tmp122)
    tmpret119 = tmp122
    return
  mbranch_1 = { 1: __atstmplab48, 2: __atstmplab49, 3: __atstmplab50, 4: __atstmplab51 }
  #__patsflab__ats2pypre_stream_patsfun_42
  tmp120 = ats2pypre_ref_get_elt(env0)
  ATSPMVlazyval_eval(tmp120); tmp121 = tmp120[1]
  #ATScaseofseq_beg
  tmplab_py = 1
  while(1):
    mbranch_1.get(tmplab_py)()
    if (tmplab_py == 0): break
  #ATScaseofseq_end
  return tmpret119

######
##
## end-of-compilation-unit
##
######
